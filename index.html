<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Arnav Asthana — Photography</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Base */
      html, body { scroll-behavior:smooth; margin:0; height:100%; overflow-x:hidden; }
      body { font-family: "Times New Roman", Times, serif; background:#0a0a0a; color:#fafafa; }
      /* Scroll snap */
      section { scroll-snap-align: start; }
      .snap-container { scroll-snap-type: y mandatory; height:100vh; overflow-y:scroll; scroll-padding-top: 3.5rem; }
      /* Keyframes */
      @keyframes fadeIn    { from {opacity:0} to {opacity:1} }
      @keyframes fadeUp    { from {opacity:0; transform:translateY(10px)} to {opacity:1; transform:translateY(0)} }
      @keyframes fadeDown  { from {opacity:0; transform:translateY(-10px)} to {opacity:1; transform:translateY(0)} }
      /* Helpers */
      .animate-fadeIn  { animation: fadeIn .6s ease forwards }
      .animate-fadeUp  { animation: fadeUp .6s ease forwards }
      .animate-fadeDown{ animation: fadeDown .6s ease forwards }
      .btn            { transition:transform .18s ease, background-color .18s ease, color .18s ease }
      .btn:hover      { transform:scale(1.05) }
      .card           { transition:transform .22s cubic-bezier(.2,.8,.2,1), box-shadow .22s }
      .card:hover     { transform:scale(1.05) rotate(1deg) }
      /* Page fade */
      .page-enter     { opacity:0 }
      .page-enter-active{ animation: fadeIn .4s ease forwards }
      /* Reveal-on-view: animate INNER wrapper so hover transforms still apply on the outer card */
      .reveal-seq > * .anim  { opacity:0; transform:translateY(10px) }
      .reveal-seq.revealed > * .anim { animation: fadeUp .6s ease forwards }
    </style>
    <!-- React + ReactDOM (UMD) + Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <noscript style="color:white;position:fixed;inset:0;display:grid;place-items:center;">
      This site needs JavaScript enabled.
    </noscript>
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
      const { useEffect, useState } = React;

      // ---- Config / Data ----
      const SITE_TITLE = "Arnav Asthana";
      const HERO_IMAGE_SRC = "hero.jpg"; // relative path (GitHub Pages safe)

      const INITIAL_LIBRARIES = [
        { slug: "cars",        title: "Cars",        cover: "libraries/cars/cover.jpg",        photos: ["libraries/cars/1.jpg"] },
        { slug: "sports",      title: "Sports",      cover: "libraries/sports/cover.jpg",      photos: ["libraries/sports/1.jpg"] },
        { slug: "landscapes",  title: "Landscapes",  cover: "libraries/landscapes/cover.jpg",  photos: ["libraries/landscapes/1.jpg"] },
        { slug: "abstract",    title: "Abstract",    cover: "libraries/abstract/cover.jpg",    photos: ["libraries/abstract/1.jpg"] },
        { slug: "scenery",     title: "Scenery",     cover: "libraries/scenery/cover.jpg",     photos: ["libraries/scenery/1.jpg"] },
        { slug: "client-work", title: "Client Work", cover: "libraries/client-work/cover.jpg", photos: ["libraries/client-work/1.jpg"] },
      ];

      const cx = (...xs) => xs.filter(Boolean).join(" ");

      // ---- Split Title (first load only) ----
      function SplitTitle({ text, onFinished, play }) {
        const letters = text.split("");
        useEffect(() => {
          if (!play) return;
          const total = letters.length * 0.04 + 0.5;
          const t = setTimeout(() => onFinished && onFinished(), total * 1000);
          return () => clearTimeout(t);
        }, [play, letters.length, onFinished]);

        const NBSP = "\xa0";
        return (
          <h1 className="text-white text-5xl md:text-7xl font-light tracking-tight drop-shadow-md">
            {letters.map((ch, i) => (
              <span
                key={i}
                className={cx("inline-block", play ? "opacity-0 animate-fadeUp" : "")}
                style={play ? { animationDelay: `${0.04 * i}s` } : undefined}
              >
                {ch === " " ? NBSP : ch}
              </span>
            ))}
          </h1>
        );
      }

      function TopNav({ visible }) {
        const links = [
          { label: "Portfolio", href: "#libraries" },
          { label: "About",     href: "#about" },
          { label: "Contact",   href: "#contact" },
        ];
        return (
          <nav className={cx(
            "fixed top-0 left-0 right-0 z-40 border-b border-neutral-800 backdrop-blur-md bg-black/25",
            visible ? "animate-fadeDown" : "opacity-0"
          )}>
            <div className="mx-auto max-w-6xl px-4 h-14 flex items-center justify-between">
              <a href="#hero" className="text-neutral-200 hover:text-white transition btn">{SITE_TITLE}</a>
              <div className="flex items-center gap-2">
                {links.map(l => (
                  <a key={l.href} href={l.href} className="px-3 py-1.5 rounded-lg hover:bg-neutral-900 text-neutral-200 btn">{l.label}</a>
                ))}
              </div>
            </div>
          </nav>
        );
      }

      function Hero({ onIntroDone, play }) {
        return (
          <header className="relative h-full w-full flex items-center justify-center">
            <div className="absolute inset-0" style={{
              backgroundImage: `url(${HERO_IMAGE_SRC})`,
              backgroundSize: "cover",
              backgroundPosition: "center"
            }} />
            <div className="absolute inset-0 bg-black/40" />
            <div className="relative z-10 text-center px-6">
              <SplitTitle text={SITE_TITLE} onFinished={onIntroDone} play={play} />
              <p className={cx("mt-4 text-neutral-300 max-w-xl mx-auto", play ? "opacity-0 animate-fadeUp" : "")}
                 style={play ? { animationDelay: ".6s" } : undefined}>
                Photography Portfolio
              </p>
              <a href="#libraries"
                 className={cx("inline-block mt-10 px-5 py-2 rounded-full bg-white/5 hover:bg-white/10 text-neutral-100 border border-neutral-700 btn",
                               play ? "opacity-0 animate-fadeUp" : "")}
                 style={play ? { animationDelay: "1s" } : undefined}>
                View Work
              </a>
            </div>
            <div className="pointer-events-none absolute inset-0 shadow-[inset_0_0_120px_rgba(0,0,0,0.8)]" />
          </header>
        );
      }

      function LibrariesGrid({ libraries, onOpen }) {
        return (
          <div className="text-center w-full max-w-5xl px-4">
            <h2 className="text-2xl md:text-3xl font-medium animate-fadeDown">Libraries</h2>
            <p className="text-neutral-400 mt-2 animate-fadeUp">Browse collections by subject or project.</p>
            <div className="mt-6 md:mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 reveal-seq">
              {libraries.map((lib, i) => (
                <button
                  key={lib.slug}
                  data-testid="lib-card"
                  onClick={() => onOpen(lib.slug)}
                  className="group card relative rounded-2xl overflow-hidden text-center outline-none bg-neutral-900"
                >
                  <div className="anim" style={{ animationDelay: `${0.08 * i}s` }}>
                    <div className="aspect-[16/13] w-full bg-neutral-800"
                         style={{ backgroundImage: `url(${lib.cover})`, backgroundSize: "cover", backgroundPosition: "center" }} />
                    <div className="p-2 md:p-3">
                      <div className="text-neutral-100 text-sm md:text-base">{lib.title}</div>
                      <div className="text-neutral-400 text-[11px] md:text-xs">{lib.photos.length} photos</div>
                    </div>
                  </div>
                </button>
              ))}
            </div>
          </div>
        );
      }

      function LibraryPage({ lib, onBack }) {
        return (
          <main className="page-enter page-enter-active">
            <header className="relative h-[60svh] w-full flex items-center justify-center text-center">
              <div className="absolute inset-0" style={{ backgroundImage: `url(${lib.cover})`, backgroundSize: "cover", backgroundPosition: "center" }} />
              <div className="absolute inset-0 bg-black/40" />
              <div className="relative z-10 max-w-6xl mx-auto px-4 py-10 w-full">
                <h1 className="text-white text-4xl md:text-5xl font-light animate-fadeDown">{lib.title}</h1>
                <p className="text-neutral-300 mt-2 animate-fadeUp">{lib.photos.length} works</p>
                <div className="mt-6">
                  <button onClick={onBack} className="inline-flex items-center gap-2 text-neutral-200 hover:text-white btn">
                    <span aria-hidden="true">←</span> Back
                  </button>
                </div>
              </div>
            </header>
            <section className="bg-neutral-950 text-center">
              <div className="max-w-6xl mx-auto px-4 py-16">
                <div className="grid gap-8 md:gap-10 justify-center" style={{ gridTemplateColumns: "repeat(auto-fill, minmax(220px,1fr))" }}>
                  {lib.photos.map((src, i) => (
                    <figure key={src}
                            className="rounded-[16px] overflow-hidden border border-neutral-800 bg-neutral-900 p-3 flex flex-col items-center opacity-0 animate-fadeUp"
                            style={{ animationDelay: `${0.03 * i}s` }}>
                      <img src={src} alt={`${lib.title} ${i + 1}`} className="w-full h-auto rounded-md object-cover" />
                      <figcaption className="text-center text-neutral-400 text-xs mt-2">{lib.title} — #{i + 1}</figcaption>
                    </figure>
                  ))}
                </div>
              </div>
            </section>
          </main>
        );
      }

      function NotFound({ onBack }) {
        return (
          <main className="mx-auto max-w-3xl px-4 py-28 text-center text-neutral-300">
            <p>Library not found.</p>
            <button onClick={onBack} className="mt-6 px-4 py-2 rounded-md bg-neutral-900 hover:bg-neutral-800 border border-neutral-800 text-white btn">Back to Home</button>
          </main>
        );
      }

      function About() {
        return (
          <main className="mx-auto max-w-3xl px-4 py-28 text-center">
            <h2 className="text-2xl md:text-3xl font-medium animate-fadeDown">About</h2>
            <p className="text-neutral-400 mt-4 whitespace-pre-wrap min-h-[4em] opacity-0 animate-fadeUp">
              I’m {SITE_TITLE}, a photographer who loves capturing stories in landscapes, cities, and people. This site showcases selected work.
            </p>
          </main>
        );
      }

      function Contact() {
        return (
          <main className="mx-auto max-w-3xl px-4 py-28 text-center">
            <h2 className="text-2xl md:text-3xl font-medium animate-fadeDown">Contact</h2>
            <p className="text-neutral-400 mt-4 opacity-0 animate-fadeUp">Reach out for shoots, licensing, or collaborations.</p>
            <div className="mt-8 grid gap-3 justify-center reveal-seq">
              <InfoRow label="Email" value={<a className="underline btn" href="mailto:hello@example.com">hello@example.com</a>} />
              <InfoRow label="Instagram" value={<a className="underline btn" href="#" target="_blank" rel="noreferrer">@yourhandle</a>} />
              <InfoRow label="Location" value="Your City, Country" />
            </div>
          </main>
        );
      }

      function InfoRow({ label, value }) {
        return (
          <div className="flex flex-col items-center opacity-0" style={{ animationDelay: ".1s", animation: "fadeUp .6s ease forwards" }}>
            <div className="text-neutral-500 text-sm uppercase tracking-wider">{label}</div>
            <div className="text-neutral-200">{value}</div>
          </div>
        );
      }

      // ---- App ----
      function App() {
        const [route, setRoute] = useState("home");
        const [libraries, setLibraries] = useState(INITIAL_LIBRARIES);
        const [navVisible, setNavVisible] = useState(false);
        const [firstLoad, setFirstLoad] = useState(() => sessionStorage.getItem("heroPlayed") ? false : true);

        const isLibRoute = route.startsWith("lib:");
        const currentLib = isLibRoute ? libraries.find(l => `lib:${l.slug}` === route) : null;

        // Reveal-on-view (replays every time)
        useEffect(() => {
          const io = new IntersectionObserver((entries) => {
            entries.forEach(e => {
              if (e.isIntersecting) e.target.classList.add("revealed");
              else e.target.classList.remove("revealed");
            });
          }, { threshold: 0.15 });
          document.querySelectorAll(".reveal-seq").forEach(el => io.observe(el));
          return () => io.disconnect();
        }, [route]);

        // Hero finished → show nav, mark one-time animation
        const handleIntroDone = () => {
          setNavVisible(true);
          if (firstLoad) {
            setFirstLoad(false);
            sessionStorage.setItem("heroPlayed", "1");
          }
        };

        // Expose helpers (optional)
        useEffect(() => {
          window.addLibrary = (lib) => setLibraries(prev => [...prev, lib]);
          window.replaceLibraries = (list) => setLibraries(list);
          return () => { delete window.addLibrary; delete window.replaceLibraries; };
        }, []);

        return (
          <div className="min-h-screen bg-neutral-950">
            {!isLibRoute && <TopNav visible={navVisible || !firstLoad} />}

            {isLibRoute ? (
              <div className="page-enter page-enter-active">
                {currentLib ? (
                  <LibraryPage lib={currentLib} onBack={() => setRoute("home")} />
                ) : (
                  <NotFound onBack={() => setRoute("home")} />
                )}
              </div>
            ) : (
              <div className="snap-container">
                <section id="hero" className="snap-start h-screen flex items-center justify-center">
                  <Hero play={firstLoad} onIntroDone={handleIntroDone} />
                </section>

                <section id="libraries" className="snap-start min-h-screen flex items-center justify-center">
                  <LibrariesGrid libraries={libraries} onOpen={(slug) => setRoute(`lib:${slug}`)} />
                </section>

                <section id="about" className="snap-start min-h-screen flex items-center justify-center">
                  <About />
                </section>

                <section id="contact" className="snap-start min-h-screen flex items-center justify-center">
                  <Contact />
                </section>
              </div>
            )}
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
